<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">

    <title>Boolex</title>
    <link rel="stylesheet" href="css/styles.css" type="text/css">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

    <script src="http://code.jquery.com/jquery-2.2.2.min.js"></script>

    <script src="js/boolex-model.js"></script>
    <script src="js/boolex-view.js"></script>
    <script src="js/boolex.js"></script>

    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 12px;
        }
    </style>
</head>

<body>

<div id="expPanel" style="display: inline-block;"></div>

<script>
    var internal = false;

    var expChangedCallback = function (expStr) {
        console.log('changed internal');
        internal = true;
        location.hash = expStr;
    };

    var exp1;
    if (location.hash) {
        exp1 = boolex('#expPanel', location.hash.substr(1), expChangedCallback);
    } else {
        var demo = 'and(or(==(color,black),==(color,blue)),or(and(>(screen size,13),<=(screen size,17)),contain(screen name,HD)),not(==(brand,Apple)),or(and(>(hdd,500G),>(ssd,128G)),>(ssd,256G)))';
        exp1 = boolex('#expPanel', '', expChangedCallback);
        location.hash = demo;
    }


    $(window).on('hashchange', function (event) {
        if (!internal) {
            console.log('changed');
            exp1.update(location.hash.substr(1));
        }
        internal = false;
    });

</script>

<datalist id="boolex-checks">
    <option value="==">
    <option value="!=">
    <option value="&gt;">
    <option value="&gt;=">
    <option value="&lt;"><
    <option value="&lt;=">
    <option value="start with">
    <option value="end with">
    <option value="contain">
    <option value="not contain">
</datalist>

</body>
</html>